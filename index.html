<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nikhil AI Voice Lab</title>

<style>
/* ---------------- GLOBAL STYLES ---------------- */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    color: white;
    overflow-x: hidden;
    background: black;
}

/* ---------------- ANIMATED TECH GRID BACKGROUND ---------------- */
canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
}

/* Purple Glow Overlay */
.glow {
    position: fixed;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(123,0,255,0.3), transparent);
    animation: rotateGlow 15s infinite linear;
    z-index: -1;
}

@keyframes rotateGlow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ---------------- MAIN CONTAINER ---------------- */
.container {
    width: 90%;
    max-width: 650px;
    margin: auto;
    padding-top: 80px;
    text-align: center;
}

/* Title */
h1 {
    font-size: 34px;
    text-shadow: 0 0 15px #9e00ff;
}

/* Input box */
textarea {
    width: 100%;
    height: 130px;
    padding: 15px;
    border-radius: 10px;
    border: none;
    outline: none;
    font-size: 16px;
    background: rgba(255,255,255,0.1);
    color: white;
}

/* Dropdown + sliders */
select, input[type="range"] {
    width: 100%;
    margin-top: 15px;
    padding: 10px;
    border-radius: 10px;
    border: none;
    outline: none;
    background: rgba(255,255,255,0.15);
    color: white;
}

/* Buttons */
button {
    width: 100%;
    padding: 15px;
    font-size: 18px;
    margin-top: 20px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background: linear-gradient(45deg, #6a00ff, #b300ff);
    color: white;
    font-weight: bold;
    transition: 0.3s;
}

button:hover {
    transform: scale(1.03);
}

/* Audio Player */
audio {
    width: 100%;
    margin-top: 20px;
}
</style>
</head>
<body>

<canvas id="grid"></canvas>
<div class="glow"></div>

<div class="container">
    <h1>⚡ Nikhil AI Voice Lab</h1>

    <textarea id="text" placeholder="Type your text here..."></textarea>

    <select id="voice">
        <option value="hi-IN-NeerjaNeural">Hindi – Neerja (Female)</option>
        <option value="hi-IN-MadhurNeural">Hindi – Madhur (Male)</option>
        <option value="en-US-AriaNeural">English – Aria (Female)</option>
        <option value="en-US-GuyNeural">English – Guy (Male)</option>
        <option value="en-US-AdamMultilingualNeural">Adam Multilingual (Premium)</option>
    </select>

    <label>Speed</label>
    <input type="range" id="speed" min="0.5" max="2" value="1" step="0.1">

    <label>Pitch</label>
    <input type="range" id="pitch" min="0" max="2" value="1" step="0.1">

    <button onclick="generateVoice()">Generate Voice</button>

    <audio id="player" controls></audio>
    <a id="downloadLink" style="display:none; color:#0ff; font-size:18px;" download="nikhil_voice.mp3">⬇ Download MP3</a>
</div>

<script>
/* ---------------- ANIMATED TECH GRID ---------------- */
const canvas = document.getElementById("grid");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let offset = 0;

function drawGrid() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle = "rgba(140,0,255,0.3)";
    ctx.lineWidth = 1;

    offset += 0.5;

    for (let i = -50; i < canvas.width; i += 40) {
        ctx.beginPath();
        ctx.moveTo(i + offset, 0);
        ctx.lineTo(i + offset, canvas.height);
        ctx.stroke();
    }

    for (let j = -50; j < canvas.height; j += 40) {
        ctx.beginPath();
        ctx.moveTo(0, j + offset);
        ctx.lineTo(canvas.width, j + offset);
        ctx.stroke();
    }

    requestAnimationFrame(drawGrid);
}
drawGrid();

/* ---------------- TEXT TO SPEECH ENGINE ---------------- */
async function generateVoice() {
    const text = document.getElementById("text").value;
    const voice = document.getElementById("voice").value;
    const speed = document.getElementById("speed").value;
    const pitch = document.getElementById("pitch").value;

    if (!text) {
        alert("Please type something!");
        return;
    }

    const api = `https://api.streamelements.com/kappa/v2/speech?voice=${voice}&text=${encodeURIComponent(text)}`;

    const response = await fetch(api);
    const audioBlob = await response.blob();
    const audioURL = URL.createObjectURL(audioBlob);

    document.getElementById("player").src = audioURL;

    const link = document.getElementById("downloadLink");
    link.href = audioURL;
    link.style.display = "block";
}
</script>

</body>
</html>
